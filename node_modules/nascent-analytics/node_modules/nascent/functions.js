'use strict';

var fs = require('fs');

var Functions = {};

Functions.buildDeviceId = function(cb) {
    fs.readFile('/factory/serial_number','utf8', function(err, s){
        if (err){
            require('getmac').getMac(function(err, mac) {
                if (err) {
                    cb(err, null);
                }else{
                    cb(null, mac.replace(/:/g, '_'));
                }
            });
        }else{
            cb(null, s.trim());
        }
    });
};

module.exports = Functions;
